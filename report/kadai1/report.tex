\documentclass[uplatex,dvipdfmx,a4paper,10pt]{jsarticle}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{latexsym}
\usepackage{multirow}
\usepackage{url}
\usepackage[separate-uncertainty]{siunitx}
\usepackage{physics}
\usepackage{enumerate}
\usepackage{bm}
\usepackage{pdfpages}
\usepackage{pxchfon}
\usepackage{tikz}
\usepackage{float}
\usepackage{listings}
\usepackage{amssymb}

% lstlistingのsetting
\lstset{
    basicstyle={\ttfamily},
    identifierstyle={\small},
    commentstyle={\smallitshape},
    keywordstyle={\small\bfseries},
    ndkeywordstyle={\small},
    stringstyle={\small\ttfamily},
    frame={tb},
    breaklines=true,
    columns=[l]{fullflexible},
    numbers=left,
    xrightmargin=0zw,
    xleftmargin=3zw,
    numberstyle={\scriptsize},
    stepnumber=1,
    numbersep=1zw,
    lineskip=-0.5ex
}

% tikz setting
\usepackage{tikz}
\usetikzlibrary{automata, intersections, calc, arrows, positioning, arrows.meta}

% theories setting (for japanese language)
\usepackage{amsmath}
\usepackage{amsthm}

\theoremstyle{definition}
\newtheorem{thm}{定理}[section]
\newtheorem{lem}[thm]{補題}
\newtheorem{prop}[thm]{命題}
\newtheorem{cor}[thm]{系}
\newtheorem{ass}[thm]{仮定}
\newtheorem{conj}[thm]{予想}
\newtheorem{dfn}[thm]{定義}
\newtheorem{rem}[thm]{注}

\newtheorem*{thm*}{定理}
\newtheorem*{lem*}{補題}
\newtheorem*{prop*}{命題}
\newtheorem*{cor*}{系}
\newtheorem*{ass*}{仮定}
\newtheorem*{conj*}{予想}
\newtheorem*{dfn*}{定義}
\newtheorem*{rem*}{注}

% \renewcommand{\rmdefault}{pplj}
% \renewcommand{\sfdefault}{phv}

\setlength{\textwidth}{165mm} %165mm-marginparwidth
\setlength{\marginparwidth}{40mm}
\setlength{\textheight}{225mm}
\setlength{\topmargin}{-5mm}
\setlength{\oddsidemargin}{-3.5mm}
% \setlength{\parindent}{0pt}

\def\vector#1{\mbox{\boldmath $#1$}}
\newcommand{\AmSLaTeX}{%
 $\mathcal A$\lower.4ex\hbox{$\!\mathcal M\!$}$\mathcal S$-\LaTeX}
\newcommand{\PS}{{\scshape Post\-Script}}
\def\BibTeX{{\rmfamily B\kern-.05em{\scshape i\kern-.025em b}\kern-.08em
 T\kern-.1667em\lower.7ex\hbox{E}\kern-.125em X}}
\newcommand{\DeLta}{{\mit\Delta}}
\renewcommand{\d}{{\rm d}}
\def\wcaption#1{\caption[]{\parbox[t]{100mm}{#1}}}
\def\rm#1{\mathrm{#1}}
\def\tempC{^\circ \rm{C}}

\makeatletter
\def\section{\@startsection {section}{1}{\z@}{-3.5ex plus -1ex minus -.2ex}{2.3ex plus .2ex}{\Large\bf}}
\def\subsection{\@startsection {subsection}{2}{\z@}{-3.25ex plus -1ex minus -.2ex}{1.5ex plus .2ex}{\normalsize\bf}}
\def\subsubsection{\@startsection {subsubsection}{3}{\z@}{-3.25ex plus -1ex minus -.2ex}{1.5ex plus .2ex}{\small\bf}}
\makeatother

\makeatletter
\def\@seccntformat#1{\@ifundefined{#1@cntformat}%
   {\csname the#1\endcsname\quad}%      default
   {\csname #1@cntformat\endcsname}%    enable individual control
}

% proof enviroment
\renewenvironment{proof}[1][\proofname]{\par
  \pushQED{\qed}%
  \normalfont \topsep6\p@\@plus6\p@\relax
  \trivlist
  \item\relax
  {\bfseries
  #1\@addpunct{.}}\hspace\labelsep\ignorespaces
}{%
  \popQED\endtrivlist\@endpefalse
}
\makeatother

\newcommand{\tenexp}[2]{#1\times10^{#2}}


\begin{document}
% タイトル
\begin{center}
{\Large{\bf 情報工学工房第1回レポート}} \\
{\bf 電気通信大学 Ⅰ類 コンピュータサイエンスプログラム 3年} \\
{\bf 2311081 木村慎之介} \\
\end{center}

\section{はじめに}
本課題においては、プログラムを実装する言語としてpythonを用いた。

\section{ニム和とニム積を求めるプログラム}
\subsection{ニム和を求めるプログラム}
\hspace{1em}ニム和と求めるプログラムは以下のように実装を行った。

\begin{lstlisting}[caption={ニム和を求めるプログラム}, label=code_nim_sum]
def nim_sum(a, b):
  return a ^ b
\end{lstlisting}

ニム和の定義は排他的論理和であったから、2つの引数\(a, b\)に対して、そのXORを返す処理を行っている。
% 実行例は以下のようになった。

% \begin{lstlisting}[caption={ニム和の実行例}, label=output_nim_sum]
% >>> nim_calc.nim_sum(1, 1)
% 0
% >>> nim_calc.nim_sum(1, 0)
% 1
% >>> nim_calc.nim_sum(0, 0)
% 0
% >>> nim_calc.nim_sum(1, 3)
% 2
% \end{lstlisting}

% 以上より、ニム和が正しく実行できていることが確認できた。

\subsection{ニム積を求めるプログラム}
\hspace{1em}ニム積は最小除外数というものによって定義されていたため、まず最小除外数の定義から確認する。

\begin{dfn}[最小除外数]
\(T\)を\(\mathbb{N}_0\)の真部分集合であるとする。\(T\)の最小除外数\(\text{mex}(T)\)は次のように定義される。
\begin{equation}
\text{mex}(T) = \min(\mathbb{N}_0 \backslash T)
\end{equation}
\label{dfn_mex}
\end{dfn}

定義\ref{dfn_mex}に基づいて最小除外数を求める関数mexを以下のように実装した。

\begin{lstlisting}[caption={最小除外数を求める関数}, label=code_mex]
"""
Calculate mex value.

Values
----------
T: list
Finate subsete of N_0.

Returns
----------
i: int
Mex.
"""
i = 0

while((i in T)):
  i += 1

return i
\end{lstlisting}

次にニム積のを求めるプログラムを実装する。
ニム積は最小除外数を用いて以下のように定義される演算である。

\begin{dfn}[ニム積]
非負整数\(a, b\)が与えられた時、以下の演算をニム積と定義する。
\begin{equation}
a \otimes b = \text{mex}(\{(a' \otimes b) \oplus (a \otimes b') \oplus (a' \otimes b') | 0 \leq a' < a, 0 \leq b' < b\})
\end{equation}
\label{dfn_nim_times}
\end{dfn}

定義\ref{dfn_nim_times}をもとにニム積を求める関数nim\_timesを以下のように実装した。

\begin{lstlisting}[caption={ニム積を求める関数}, label=code_nim_times]
def nim_times(a, b):
  if(a == 0 or b == 0):
    return 0
  
  T = []
  
  for a_prime in range(0, a):
    for b_prime in range(0, b):
      t = nim_sum(nim_times(a_prime, b), nim_times(a, b_prime))
      t = nim_sum(t, nim_times(a_prime, b_prime))

      if(not(t in T)):
        T.append(t)

  return mex.mex(T)
\end{lstlisting}

コード\ref{code_nim_times}では基底として\(a = 0 \lor b = 0\)のときに\(0\)を返し、それ以外のときはコード\ref{code_nim_sum}とコード\ref{code_mex}定義したニム和と最小除外数を求める関数を用いて再帰的にニム積を求めている。
\(a = 0 \lor b = 0\)のときにニム積が\(0\)になることは\(0 \leq x < 0\)を満たす実数\(x\)が存在しないことから集合\(\{(a' \otimes b) \oplus (a \otimes b') \oplus (a' \otimes b') | 0 \leq a' < a, 0 \leq b' < b\}\)が空集合となることより求められる。\\
さてこのプログラムでもニム積を求めることは可能ではあるが、ニム積の定義より今のアルゴリズムでは少なくとも指数関数的に増えることは用意に想像できる。

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\appendix
\setcounter{figure}{0}
\setcounter{table}{0}
\numberwithin{equation}{section}
\renewcommand{\thetable}{\Alph{section}\arabic{table}}
\renewcommand{\thefigure}{\Alph{section}\arabic{figure}}
%\def\thesection{付録\Alph{section}}
\makeatletter 
\newcommand{\section@cntformat}{付録 \thesection:\ }
\makeatother
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

    
\end{document}